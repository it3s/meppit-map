{"version":3,"file":"meppit-map.min.js","sources":["meppit-map.js"],"names":["BaseClass","EditorManager","Map","Popup","counter","getDate","getHash","interpolate","isArray","isNumber","isString","requestJSON","reverseCoordinates","_log","_warn","__hasProp","hasOwnProperty","__extends","child","parent","ctor","this","constructor","key","call","prototype","__super__","window","Meppit","VERSION","data","Object","toString","tpl","obj","replace","a","b","r","char","hash","i","_i","_ref","length","charCodeAt","date","day","month","months","year","yy","Date","getMonth","getYear","log","args","concat","Array","slice","arguments","MEPPIT_SILENCE","console","join","warn","feature","_len","_results","push","reverse","type","geometry","coordinates","features","url","callback","req","XMLHttpRequest","ActiveXObject","_requests","onreadystatechange","readyState","status","JSON","parse","responseText","open","send","cid","name","apply","getOption","_ref1","_ref2","options","defaultOptions","setOption","value","define","_super","map","_initToolbars","_uneditedLayerProps","drawControl","edit","layer","_getLeafletLayer","_currentLayer","done","_currentCallback","_this","_ref3","_backupLayer","editing","enable","dragging","load","draw","cancel","toLowerCase","_drawing","L","Draw","Polygon","leafletMap","Polyline","Marker","once","e","geoJSON","toGeoJSON","properties","disable","_revertLayer","_initEditToolbar","drawnItems","_ensureGeoJsonManager","Control","featureGroup","_addLeafletControl","id","Util","stamp","latlngs","LatLngUtil","cloneLatLngs","getLatLngs","latlng","cloneLatLng","getLatLng","edited","setLatLngs","setLatLng","_ensureLeafletMap","_ensureTileProviders","__defineLeafletDefaultImagePath","selectTileProvider","element","document","createElement","zoom","center","tileProvider","idPropertyName","urlPropertyName","featureURL","geojsonTileURL","enableEditor","enablePopup","enableGeoJsonTile","destroy","remove","getURL","resp","_geoJsonManager","addData","show","fit","get","removeLayer","__clearLayerEventListeners","leafletLayers","_getGeoJSONId","_getGeoJSONHash","closePopup","panTo","_ensureEditorManager","_editorManager","openPopup","content","openPopupAt","latLng","_ensurePopupManager","close","bounds","_getBounds","fitBounds","panInsideBounds","provider","tileProviders","addTo","currentTileProvider","clear","clearLayers","getZoom","setZoom","zoomIn","zoomOut","baseURL","_getBaseURL","getBounds","extend","latLngBounds","baseDocument","baseElements","getElementsByTagName","href","location","protocol","hostname","port","_getGeoJsonTileURL","getElementById","__getLeafletMapOptions","onEachFeatureCallback","styleCallback","__saveFeatureLayerRelation","__addLayerEventListeners","style","onEachFeature","__geoJsonTileLayer","TileLayer","GeoJSON","clipTiles","unique","_popupManager","PopupManager","_base","_base1","attribution","subdomains","satellite","addControl","stringify","on","off","meppitMapRe","path","script","scripts","src","Icon","Default","imagePath","match","split","_createPopup","popupTemplate","getCenter","_popup","setContent","_getContent","openOn","template","popupContent"],"mappings":"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"}