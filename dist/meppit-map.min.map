{"version":3,"file":"meppit-map.min.js","sources":["meppit-map.js"],"names":["BaseClass","EditorManager","Map","Popup","counter","getDate","getHash","interpolate","isArray","isNumber","isString","requestJSON","reverseCoordinates","_log","_warn","__hasProp","hasOwnProperty","__extends","child","parent","ctor","this","constructor","key","call","prototype","__super__","window","Meppit","VERSION","data","Object","toString","tpl","obj","replace","a","b","r","char","hash","i","_i","_ref","length","charCodeAt","date","day","month","months","year","yy","Date","getMonth","getYear","log","args","concat","Array","slice","arguments","MEPPIT_SILENCE","console","join","warn","feature","_len","_results","push","reverse","type","geometry","coordinates","features","url","callback","req","XMLHttpRequest","ActiveXObject","_requests","onreadystatechange","readyState","status","JSON","parse","responseText","open","send","cid","name","apply","getOption","_ref1","_ref2","options","defaultOptions","setOption","value","define","_super","map","_initToolbars","_uneditedLayerProps","drawControl","edit","layer","_getLeafletLayer","_currentLayer","done","_currentCallback","_this","_ref3","_backupLayer","editing","enable","dragging","load","draw","cancel","toLowerCase","_drawing","L","Draw","Polygon","leafletMap","Polyline","Marker","once","e","geoJSON","toGeoJSON","properties","disable","_revertLayer","_initEditToolbar","drawnItems","_ensureGeoJsonManager","Control","featureGroup","_addLeafletControl","id","Util","stamp","latlngs","LatLngUtil","cloneLatLngs","getLatLngs","latlng","cloneLatLng","getLatLng","edited","setLatLngs","setLatLng","_ensureLeafletMap","_ensureTileProviders","__defineLeafletDefaultImagePath","selectTileProvider","element","document","createElement","zoom","center","tileProvider","idPropertyName","urlPropertyName","featureURL","geojsonTileURL","enableEditor","enablePopup","enableGeoJsonTile","destroy","remove","getURL","resp","_geoJsonManager","addData","get","removeLayer","__clearLayerEventListeners","leafletLayers","_getGeoJSONId","_getGeoJSONHash","closePopup","panTo","_ensureEditorManager","_editorManager","openPopup","content","openPopupAt","latLng","_ensurePopupManager","close","fit","getBounds","fitBounds","setView","getMaxZoom","panInsideBounds","provider","tileProviders","addTo","currentTileProvider","clear","clearLayers","getZoom","setZoom","zoomIn","zoomOut","baseURL","_getBaseURL","baseDocument","baseElements","getElementsByTagName","href","location","protocol","hostname","port","_getGeoJsonTileURL","getElementById","__getLeafletMapOptions","onEachFeatureCallback","styleCallback","__saveFeatureLayerRelation","__addLayerEventListeners","style","onEachFeature","__geoJsonTileLayer","TileLayer","GeoJSON","clipTiles","unique","geojsonLayer","_popupManager","PopupManager","_base","_base1","attribution","subdomains","satellite","addControl","stringify","on","off","meppitMapRe","path","script","scripts","src","Icon","Default","imagePath","match","split","_createPopup","popupTemplate","getCenter","_popup","setContent","_getContent","openOn","template","popupContent"],"mappings":"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"}